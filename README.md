# marketplace-api

REST API –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π, JWT, –ª–µ–Ω—Ç–æ–π –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.


## üöÄ –ó–∞–ø—É—Å–∫

- –î–æ–±–∞–≤—å –ø—É—Ç—å `.env` —Ñ–∞–π–ª–∞ (`marketplace-api/.env`)

#### –ü—Ä–∏–º–µ—Ä:
```env
env=local
secret_word="exampleword"

server:
  address: "localhost"
  port: "80"

POSTGRES_HOST=postgres-db
POSTGRES_PORT=5432
POSTGRES_USER=root
POSTGRES_PASSWORD=root
POSTGRES_DB=auth_db
postgres_db_pool_max_conns=20

sender_host="smtp.example.com"
sender_email="example@mail.com"
sender_password="password"
sender_port=587
```

#### –°–∞–º –∑–∞–ø—É—Å–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:

```bash
docker compose -f marketplace-api/deployments/docker-compose up -d --build
```

---

## üì¶ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (JWT + Refresh —Ç–æ–∫–µ–Ω—ã)
- ‚úÖ –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–µ–Ω—Ç—ã –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Ü–µ–Ω–µ
- ‚úÖ –ü—Ä–∏–∑–Ω–∞–∫ `isMine` —É –æ–±—ä—è–≤–ª–µ–Ω–∏–π ‚Äî –∞–≤—Ç–æ—Ä –ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- ‚úÖ –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ refresh —Ç–æ–∫–µ–Ω—ã, —Ö—Ä–∞–Ω–∏–º—ã–µ –≤ –ë–î
- ‚úÖ Logout —É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é
- ‚úÖ Middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (JSON body –∏ query)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üß™ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

| Method | URL                     | Auth | Description                     |
|--------|--------------------------|------|---------------------------------|
| POST   | `/api/signup`            | üîì   | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è                    |
| POST   | `/api/login`             | üîì   | –í—Ö–æ–¥ –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é        |
| POST   | `/api/logout`            | üîí   | –í—ã—Ö–æ–¥ —Å —Ç–µ–∫—É—â–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞     |
| POST   | `/api/token/refresh`     | üîì   | –û–±–Ω–æ–≤–∏—Ç—å Access + Refresh —Ç–æ–∫–µ–Ω—ã |

> **Authorization:** –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å access-—Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
>  
> `access_token: <access_token>`
> `refresh_token: <refresh_token>`

---

### üì¢ –û–±—ä—è–≤–ª–µ–Ω–∏—è
 
| Method | URL               | Auth | Description                      |
|--------|--------------------|------|----------------------------------|
| GET    | `/api/ads`         | üîì   | –ü–æ–ª—É—á–∏—Ç—å –ª–µ–Ω—Ç—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π        |
| POST   | `/api/ads/create`  | üîí   | –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ               |

---

### üì• –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

```json
{
  "title": "–ü—Ä–æ–¥–∞–º MacBook",
  "description": "–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–ª–∏—á–Ω–æ–µ, 16 –ì–ë –û–ó–£, SSD 512 –ì–ë",
  "image_url": "https://example.com/macbook.jpg",
  "price": 115000
}

```

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
  
- Go ‚Äî —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- Gin ‚Äî HTTP-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- PGX ‚Äî PostgreSQL-–¥—Ä–∞–π–≤–µ—Ä
- PostgreSQL ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- JWT ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (access + refresh)
- Docker / Docker Compose ‚Äî –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞
- bcrypt ‚Äî —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ refresh —Ç–æ–∫–µ–Ω–æ–≤
- slog ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  
### üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏—è 

- Refresh —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ refresh_tokens, —Å–≤—è–∑–∞–Ω—ã —Å user_id.
- –¢–æ–∫–µ–Ω—ã –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ ‚Äî –ø—Ä–∏ —Ä–µ—Ñ—Ä–µ—à–µ —Å—Ç–∞—Ä—ã–π —É–¥–∞–ª—è–µ—Ç—Å—è –∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π.
- Access —Ç–æ–∫–µ–Ω—ã –∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏–µ, –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.
- Logout —É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω—ã —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã.
- –û–±—ä—è–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º, –Ω–æ –±–µ–∑ isMine –≤ –æ—Ç–≤–µ—Ç–µ.
- Middleware ValidateTokenOptional –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ —Ç–æ–∫–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω –∏–ª–∏ –Ω–µ—Ç –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
